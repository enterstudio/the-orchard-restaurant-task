{% extends 'base.html' %}

{% block content %}
  <hr />
  <div class="container">
    <div class="row">
      <h2>{{ restaurant.name }}</h2>
    </div>
    <div class="row">
      <p class="lead">{{ restaurant.address }}</p>
    </div>
    <div class="row">
      <p>Tel: {{ restaurant.phone }}</p>
    </div>
    <div class="row">
      <h3>Summary</h3>
      <table class="table table-bordered">
        <thead class="thead-inverse">
          <tr>
            <th>Summary</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Average Score</td>
            <td>{{ restaurant.average_score }}</td>
          </tr>
          <tr>
            <td>Total # A</td>
            <td>{{ restaurant.total_a }}</td>
          </tr>
          <tr>
            <td>Latest Critical Count</td>
            <td>{{ restaurant.recent_critical_count }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="row">
      <h3>Inspections</h3>
      <table class="table table-bordered">
      <thead class="thead-inverse">
        <tr>
          <th>#</th>
          <th>Inspection Date</th>
          <th>Grade</th>
          <th>Grade Date</th>
          <th>Score</th>
          <th>Critical</th>
          <th>Violation</th>
        </tr>
      </thead>
      <tbody>
      {% for inspection in restaurant.inspections %}
        <tr>
          <th scope="row">{{ loop.index }}</th>
          <td>{{ inspection.inspection_date }}</td>
          <td>{{ inspection.grade}}</td>
          <td>{{ inspection.grade_date}}</td>
          <td>{{ inspection.score}}</td>
          <td class="{{ 'table-danger' if inspection.critical_flag }}">{{ 'Yes' if inspection.critical_flag else 'No'}}</td>
          <td>{{ inspection.violation_description }}</td>
        </tr>
      {%  endfor %}
      </tbody>
    </table>
    </div>
  </div>
{% endblock %}
